(function(a){a(document).ready(function(){Drupal.menuTab.init();Drupal.menuItem.init();Drupal.menuLayout.init();a("input.numeric").numeric({negative:false});a("#submnu_full_width").change(function(){if(a(this).is(":checked")){a("#mnu-sub-width").hide()}else{a("#mnu-sub-width").show()}});blocktype=a("#blocklist .md-listleft li");blocktype_length=blocktype.length;if(blocktype_length>9){blocktype.slice(7,blocktype_length).hide();a("#blocklist .md-listleft").append('<div id="showallblocks">Show all</div>');a("#showallblocks").click(function(){blocktype.show();a(this).remove()})}function b(d){var c=[];a("> li",d).each(function(){var f=a.stringToObject(a(this).find("input.setting").val());var e=a(this).has("ul")?b(a("> ul",a(this))):null;c.push({setting:f,subItems:e})});return c}a("#edit-save-btn, #edit-save-continue-btn").click(function(){var c=[];a("#md-tabs .ui-tabs-nav a.tab-link").each(function(){var f=a(a(this).attr("href")),d=[],e=a.stringToObject(f.find("input.settings").val());if(e.mnu_fly_type){$tree=f.find("div.tree");if($tree.has("ul")){d=b(a("> ul",$tree))}}else{f.find(".md-row").each(function(){var g=[];a(this).find("div.md-col").each(function(){var h=[];a(this).find("div.md-bl").each(function(){var i=a(this).find("input.setting").val();h.push(a.unserialize(i))});g.push(h)});if(g.length>0){d.push(g)}})}c.push({settings:e,subMenu:d})});a("textarea.md-megamenu-data-save").val(a.objectToString(c))});a("#dlg-mnuitemsetting").delegate("a.choose-image-link","click",function(){var c=a(this);Drupal.media.popups.mediaBrowser(function(g){var e=g[0],f=c.prev().empty(),d=a("<img/>").attr("src",e.url);f.append(d);c.next().show();a("#icon_url").val("id="+e.fid+"&url="+e.url)})});a("#dlg-item").delegate("a.choose-image-link","click",function(){var c=a(this);Drupal.media.popups.mediaBrowser(function(g){var e=g[0],f=c.prev().empty(),d=a("<img/>").attr("src",e.url);f.append(d);a("input",c.parent()).val("id="+e.fid+"&url="+e.url)})});a("#dlg-mnuitemsetting").delegate("a.remove-image-link","click",function(){a("#dlg-mnuitemsetting .image-preview img").remove();a("#icon_url").val("");a(this).hide()});a("#mnu_type").change(function(){if(a(this).is(":checked")){a("#dlg-mnuitemsetting .form-item-submenu-fullwidth").show();a("#dlg-mnuitemsetting .form-item-submenu-width").removeClass("no-border");a("#submenu-fullwidth").trigger("change")}else{a("#dlg-mnuitemsetting .form-item-submenu-fullwidth").hide();a("#dlg-mnuitemsetting .form-item-submenu-width").show().addClass("no-border")}});a("#submenu-fullwidth").change(function(){if(a(this).is(":checked")){a(this).parent().next().hide()}else{a(this).parent().next().show()}}).trigger("change");Drupal.menuTab.initTab()});a.fn.loadingDialog=function(){a(this).html('<div class="divloading"></div>');a(this).parent().find("button.ui-button").attr("disabled",true);return this};a.fn.unLoadingDialog=function(){a(this).parent().find("button.ui-button").attr("disabled",false);return this}})(jQuery);
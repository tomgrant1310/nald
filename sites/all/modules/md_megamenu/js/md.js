(function(e){e(document).ready(function(){function t(n){var r=[];e("> li",n).each(function(){var n=e.stringToObject(e(this).find("input.setting").val());var i=e(this).has("ul")?t(e("> ul",e(this))):null;r.push({setting:n,subItems:i})});return r}Drupal.menuTab.init();Drupal.menuItem.init();Drupal.menuLayout.init();e("input.numeric").numeric({negative:false});e("#submnu_full_width").change(function(){if(e(this).is(":checked")){e("#mnu-sub-width").hide()}else{e("#mnu-sub-width").show()}});blocktype=e("#blocklist .md-listleft li");blocktype_length=blocktype.length;if(blocktype_length>9){blocktype.slice(7,blocktype_length).hide();e("#blocklist .md-listleft").append('<div id="showallblocks">Show all</div>');e("#showallblocks").click(function(){blocktype.show();e(this).remove()})}e("#edit-save-btn, #edit-save-continue-btn").click(function(){var n=[];e("#md-tabs .ui-tabs-nav a.tab-link").each(function(){var r=e(e(this).attr("href"));var i=[];var s=e.stringToObject(r.find("input.settings").val());if(s.mnu_fly_type){$tree=r.find("div.tree");if($tree.has("ul")){i=t(e("> ul",$tree))}}else{r.find(".md-row").each(function(){var t=[];e(this).find("div.md-col").each(function(){var n=[];e(this).find("div.md-bl").each(function(){var t=e(this).find("input.setting").val();n.push(e.unserialize(t))});t.push(n)});if(t.length>0)i.push(t)})}n.push({settings:s,subMenu:i})});e("textarea.md-megamenu-data-save").val(e.objectToString(n))});e("a.choose-image-link").live("click",function(){var t=e(this);Drupal.media.popups.mediaBrowser(function(n){var r=n[0];var i=t.prev().empty();var s=e("<img/>").attr("src",r.url);i.append(s);t.next().val("id="+r.fid+"&url="+r.url)})});Drupal.menuTab.initTab()});e.fn.loadingDialog=function(){e(this).html('<div class="divloading"></div>');e(this).parent().find("button.ui-button").attr("disabled",true);return this};e.fn.unLoadingDialog=function(){e(this).parent().find("button.ui-button").attr("disabled",false);return this}})(jQuery)
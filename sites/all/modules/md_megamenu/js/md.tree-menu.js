(function(a){a(function(){a.fn.megadrupalTreeMenu=function(){var b=a(this);not=a("li",b).has("div.dropzone");a("li",b).not(not).prepend('<div class="dropzone"></div>');a("dl, .dropzone",b).droppable({accept:"li.dragitem",tolerance:"pointer",drop:function(f,d){var c=a(this).parent();var g=!a(this).hasClass("dropzone");if(g&&c.children("ul").length==0){c.append("<ul/>")}if(g){c.addClass("sm2_liOpen").removeClass("sm2_liClosed").children("ul").append(d.draggable)}else{c.before(d.draggable)}a("li.sm2_liOpen",b).not(":has(li:not(.ui-draggable-dragging))").removeClass("sm2_liOpen");c.find("dl,.dropzone").css({backgroundColor:"",borderColor:""})},over:function(){a(this).filter("dl").css({backgroundColor:"#F90"});a(this).filter(".dropzone").css({borderColor:"#F90"})},out:function(){a(this).filter("dl").css({backgroundColor:""});a(this).filter(".dropzone").css({borderColor:""})}});a("li",b).draggable({handle:" > dl",opacity:0.8,addClasses:false,helper:"clone",zIndex:100})};a("#dropdown").megadrupalTreeMenu();a("#dropdown dl").live("mouseenter",function(){a(this).addClass("hover")}).live("mouseleave",function(){a(this).removeClass("hover")});a("#btn_add").click(function(){a("#dropdown").append(a("#dropdown li:last").clone());a("#dropdown").megadrupalTreeMenu()})})})(jQuery);
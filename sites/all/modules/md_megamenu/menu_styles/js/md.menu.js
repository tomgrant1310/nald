(function(a){a(window).resize(function(){a(".mdmegamenu").each(function(){var n=a(this),h=n.outerWidth(true);var b=n.width(),f=a(window).width();mmWidth=n.outerWidth();if(n.hasClass("md-vertical")){if(n.hasClass("md-vertical-rtl")){var i=a("> ul",n).width();var e=(f-(a("> ul",n).offset().left+a("> ul",n).outerWidth())),b=f-i-e-20;if(b>mmWidth){b=mmWidth-i}a("div.mm-customwidth",n).each(function(){var o=parseInt(a(this).data("width"));if(b<o){a(this).addClass("mm-fullwidth")}else{a(this).width(o);a(this).removeClass("mm-fullwidth")}});if(i>(f-e-20)/2){a(".mm-container",n).each(function(){var o=a(this).parent();a(this).css({top:o.height(),left:0});if(a(this).hasClass("mm-fullwidth")){a(this).width(n.width())}})}else{a("div.mm-fullwidth",n).width(b)}}else{var i=a("> ul",n).width();var j=a("> ul",n).offset().left;b=f-i-j-20;if(b>mmWidth){b=mmWidth-i}a("div.mm-customwidth",n).each(function(){var o=parseInt(a(this).data("width"));if(b<o){a(this).addClass("mm-fullwidth")}else{a(this).width(o);a(this).removeClass("mm-fullwidth")}});if(i>(f-j-20)/2){a(".mm-container",n).each(function(){var o=a(this).parent();a(this).css({top:o.height(),left:0});if(a(this).hasClass("mm-fullwidth")){a(this).width(n.width())}})}else{a("div.mm-fullwidth",n).width(b)}}}else{if(n.hasClass("mm-fixed-bottom")){_tmpheight=n.outerHeight()-parseInt(n.css("borderTopWidth"))-parseInt(n.css("borderBottomWidth"));a("> ul > li",n).each(function(){a("> .mm-container",a(this)).css("bottom",_tmpheight)})}else{a("> ul > li",n).each(function(){a("> .mm-container",a(this)).css("top",a(this).height()+a(this).position().top)})}a("div.mm-customwidth",n).each(function(){var q=parseInt(a(this).data("width"));a(this).width(q);a(this).removeClass("mm-fullwidth");var o=a(this).parent("li").position(),p=o.left,s=a(this).width(),r=p+s;if(n.hasClass("mm-fixed-bottom")||n.hasClass("mm-fixed-top")){h=h*2}if(r>h){mainSubLeft=h-s;if(a.browser.msie){if((parseInt(a.browser.version,10)==7)||(parseInt(a.browser.version,10)==8)||(parseInt(a.browser.version,10)==9)){mainSubLeft=h-s+5}}a(this).css("left",mainSubLeft)}else{a(this).css("left",p)}});a(".mm-dropdown",n).each(function(){a(this).children(".mm-container").css("left",a(this).position().left)})}a("div.mm-sub",n).each(function(){var o=a(this).children(".background-color").not(".mmg_12");a(o).each(function(){var q=a(this),r=0,p=q.parents(".mm-container");p.show();r=q.parent().height();if(r>0){q.height(r)}p.hide()})});var l=n.data("type-responsive"),c=n.find(".megamenu"),m=a(".mdtoggle-nav",n),k=window.innerWidth;if(!n.hasClass("md-horizontal")){a(".mm-container",n).css({left:""})}if(window.innerWidth<=l){var d=c.width();m.show();n.addClass("mm-responsive")}else{m.hide();c.css("display","");n.removeClass("mm-responsive")}a(".active",n).removeClass("active");a(".deactive",n).removeClass("deactive");a(".mm-hover",n).removeClass("mm-hover");a(".mm-container",n).css({display:""});a(".mm-container",n).each(function(){a(this).css("display","")});a.each(a(".megamenu >.mm-dropdown >ul.mm-container",n),function(){a(".contrary",n).removeClass("contrary");var o=true;g(a(this),o)});function g(r,q){if(!r.length){return true}r.css({display:"block",opacity:0});var o=r.outerWidth(),p=r.offset().left;if(o+p>k){r.addClass("contrary");if(q){r.closest(".mm-item.mm-dropdown").css("position","relative")}}g(a(">.mm-parent >.mm-container",r));a("ul.mm-container",n).css({display:"",opacity:""})}})});a.fn.megadrupalMenu=function(n){var m=this,f=m.parent(),l=f.data("type-responsive"),j=1000;function h(){if(window.innerWidth>l){d(this)}}function g(){if(window.innerWidth>l){c(this)}}function e(o){a("li",o).removeClass("mm-hover");a(".mm-container",o).hide()}function d(p){var o=a("> .mm-container",p);a(p).parents(".mdmegamenu").find(".mm-container").not(a(p).parents(".mm-container")).hide();a(".deactive",m).removeClass("deactive");a(p).siblings(".mm-parent").addClass("deactive");a(p).addClass("mm-hover");if(o.length>0&&o.is(":hidden")==false){return}if(o.is(":hidden")){switch(b.effects.effectTypeOpen){case"slide":o.stop(true,true).delay(b.timeBeforeOpening).slideDown(b.effects.effectSpeedOpen,b.effects.effectOpen,function(){});break;case"fade":o.stop(true,true).delay(b.timeBeforeOpening).fadeIn(b.effects.effectSpeedOpen,b.effects.effectOpen,function(){});break;default:o.stop(true,true).delay(b.timeBeforeOpening).show()}}}function c(p){var o=a("> .mm-container",p);a(p).siblings(".mm-parent").addClass("deactive");a(p).addClass("deactive");if(o.length>0&&o.is(":hidden")==false){switch(b.effects.effectTypeClose){case"slide":o.stop(true,true).delay(b.timeBeforeClosing).slideUp(b.effects.effectSpeedClose,b.effects.effectClose,function(){a(p).removeClass("mm-hover")});break;case"fade":o.stop(true,true).delay(b.timeBeforeClosing).fadeOut(b.effects.effectSpeedClose,b.effects.effectClose,function(){a(p).removeClass("mm-hover")});break;default:o.stop(true,true).delay(b.timeBeforeClosing).hide();a(p).removeClass("mm-hover")}}else{a(p).removeClass("mm-hover")}}var b=a.extend({effects:{effectSpeedOpen:300,effectSpeedClose:200,effectTypeOpen:"slide",effectTypeClose:"slide",effectOpen:"linear",effectClose:"linear"},timeBeforeOpening:100,timeBeforeClosing:200,trigger:"hover-intent",arrow:false,vertical:false,verticalDirection:"ltr",subAlign:"middle"},n);var i=navigator.userAgent.toLowerCase();var k=i.match(/(iphone|ipod|ipad|android|"windows phone")/);return this.each(function(){var r=a(this),q=r.parent(),p=a("li.mm-parent",r);if(q.hasClass("mm-fixed-bottom")||q.hasClass("mm-fixed-top")){a(".mm-toggle",q).click(function(){a(this).toggleClass("mm-toggle-show");q.toggleClass("mm-toggle-hide");a("> ul",q).slideToggle();return false})}p.each(function(){var t=a(this);if(b.arrow){a("> a",t).addClass("with-arrow").append('<span class="mm-arrow"></span>')}if(b.vertical){if(b.subAlign=="middle"){var u=m.position().top,s=t.position(),w=s.top,v=t.height(),y=a("> .mm-container",this),x=y.height(),z=(x/2-v/2);offsetTop=w-u;if(w>=z){y.css("top",-z)}else{y.css("top",-offsetTop)}}}});if(b.trigger==="hover"){p.hover(h,g)}else{if(b.trigger==="click"){a("body").mouseup(function(s){if(window.innerWidth>l){if(!a(s.target).parents(".mm-hover").length){e(r)}}});a("> a",p).click(function(s){if(window.innerWidth>l){var t=a(this).parent();if(!t.hasClass("mm-hover")){d(t);s.preventDefault()}}});a(".mm-arrow",p).click(function(t){var s=a(this).closest(".mm-parent");if(s.hasClass("mm-hover")){t.stopPropagation();t.preventDefault();c(s)}})}else{var o={sensitivity:2,interval:100,over:h,timeout:400,out:g};p.hoverIntent(o)}}a(".mdtoggle-nav",f).hide().click(function(){a(this).toggleClass("rp-active");m.slideToggle("slow")});a(".mdtoggle-sub",f).click(function(t){t.stopPropagation();var s=a(this).closest(".mm-parent");if(window.innerWidth<=l){if(s.hasClass("mm-hover")){s.removeClass("mm-hover");a(this).nextAll(".mm-container").slideUp("slow")}else{s.addClass("mm-hover");a(this).nextAll(".mm-container").slideDown("slow")}}});a(window).resize()})};a.megaCheckItemContrary=function(f,e,c){if(!e.length){return true}e.css({display:"block",opacity:0});setTimeout(function(){e.css({display:"",opacity:""})},100);var d=e.offset().left,b=e.outerWidth(),g=a(">li.mm-parent >ul.mm-container",e);if(d+b>window.innerWidth){e.addClass("contrary")}a.megaCheckItemContrary(e,g,c)};a.megaCheckContrary=function(b){a(".contrary",b).removeClass("contrary");var d=b.width(),c=b.parent();a.each(a(">.mm-item",b),function(){var f=a(" >ul.mm-container",this),e=0;if(c.hasClass("md-horizontal")){a.each(a(this).prevAll(),function(){e+=a(this).outerWidth()})}else{e=a(this).outerWidth()}a(this).data("offset-left",e);a.megaCheckItemContrary(a(this),f,d)})}})(jQuery);